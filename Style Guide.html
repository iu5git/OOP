<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Style Guide.md</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><blockquote>
<p><em>Попытка использовать любой инструмент, не разобравшись хотя бы в основах того, что он делает и как его<br>
следует использовать, скорее всего, приведет к разочарованию. С другой стороны, если потратить все свое<br>
время на изучение теории о чем-то без практического применения, это будет довольно скучным занятием и<br>
часто приводит к слишком идеалистическому пониманию.</em><br>
© 2018 Крейг Скотт</p>
</blockquote>
<h1 id="bmstu-cs-style-guide----omit-in-toc---">BMSTU CS Style Guide <!-- omit in toc --></h1>
<blockquote>
<p>Стайл гайд и общий список советов при написании кода на C++ для студентов курса “Программирование на основе классов и шабллонов” кафедры ИУ5 МГТУ им. Н.Э. Баумана.</p>
</blockquote>
<h2 id="содержание----omit-in-toc---">Содержание <!-- omit in toc --></h2>
<ul>
<li><a href="#%D0%BE%D0%B1%D1%89%D0%B8%D0%B5-%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%B0">Общие правила</a></li>
<li><a href="#stl-%D0%B8-%D0%BE%D0%BE%D0%BF">STL и ООП</a></li>
<li><a href="#%D0%BA%D0%BE%D0%BC%D0%BF%D0%B8%D0%BB%D1%8F%D1%86%D0%B8%D1%8F">Компиляция</a></li>
<li><a href="#dry">DRY</a></li>
<li><a href="#kiss">KISS</a></li>
<li><a href="#rule-of-five">Rule of Five</a></li>
</ul>
<h3 id="общие-правила">Общие правила</h3>
<blockquote>
<p>Общие правила были описаны в <a href="https://fitoliaka.github.io/IU5/CPP/Style%20Guide.html">Style Guade</a> в 1 семестре.</p>
</blockquote>
<p>напомним:</p>
<p>Независимо от ваших предпочтений, следование данному <code>Style Guade</code> <strong>абсолютно обязательно</strong>.<br>
В названиях должен быть использован грамотный английский язык.</p>
<hr>
<h3 id="stl-и-ооп">STL и ООП</h3>
<p>Использование элементов <strong>ООП</strong>  постепенно будет доступно для использования. Уточняйте у ваших преподавателей с какими контейнерами и классами стандартных библиотек в каких лабораторных можно использовать.</p>
<hr>
<h3 id="компиляция">Компиляция</h3>
<p>Любая компиляция исходного кода должна сопровождаться флагами <em>-Wall</em>, <em>-Wextra</em>, <em>-Werror</em> и -<em>Wpedantic</em>.</p>
<p>Благодаря этим флагам компилятор интерпретирует предупреждения как ошибки компиляции, что заставляет писать более аккуратный и безопасный код.</p>
<hr>
<h3 id="dry">DRY</h3>
<p><strong>DRY</strong> - Don’t Repeat Yourself. Принцип разработки, согласно которому следует избегать дублирование кода в приложении.</p>
<p>Старайтесь грамотно декомпозировать код на отдельные функции, которые затем можно переиспользовать в разных местах.</p>
<p>Если какая-то часть функциональности повторяется в разных местах - это повод вынести ее в отдельную функцию. В таком случае, если понадобится внести изменения, то их достаточно будет применить в одном месте, вместо нескольких. Это уменьшает вероятность появления ошибки и упрощает разработку.</p>
<p>Следует внимательно относится к данному принципу и не следовать ему слишком фанатично, так как это может привести к усилению <a href="https://ru.wikipedia.org/wiki/%D0%97%D0%B0%D1%86%D0%B5%D0%BF%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)">зацепления</a>.</p>
<hr>
<h3 id="kiss">KISS</h3>
<p><strong>KISS</strong> - Keep It Simple, Stupid. Принцип разработки, согласно которому следует предпочитать простые конструкции сложным.</p>
<p>По возможности избегайте неоправданного усложнения кода и пишите такой код, который будет понятен постороннему человеку, находящемуся вне контекста.</p>
<hr>
<h3 id="rule-of-five">Rule of Five</h3>
<p>Это правило проектирования классов в C++, актуальное для C++11 и выше (включая C++20), которое применяется, если класс управляет ресурсами вручную (динамическая память, файлы, сокеты и т.п.).</p>
<p><em><strong>Суть Rule of Five</strong></em></p>
<p>Если в классе явно реализован хотя бы один из следующих методов, то скорее всего необходимо реализовать все пять:</p>
<ul>
<li>Деструктор</li>
<li>Конструктор копирования</li>
<li>Оператор копирующего присваивания</li>
<li>Конструктор перемещения</li>
<li>Оператор перемещающего присваивания</li>
</ul>
<p><em><strong>Зачем это нужно</strong></em></p>
<p>При наличии ресурсов (например, char*) компилятор не может автоматически корректно управлять копированием и освобождением памяти.<br>
Без Rule of Five возникают:</p>
<ul>
<li>утечки памяти;</li>
<li>двойное освобождение (double free);</li>
<li>неопределённое поведение.</li>
</ul>
<p><em><strong>Полный список методов Rule of Five (C++20)</strong></em></p>
<pre class=" language-cpp"><code class="prism  language-cpp"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">char</span><span class="token operator">*</span> data<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token comment">// 1. Конструктор по умолчанию</span>
    <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span>

    <span class="token comment">// 2. Конструктор копирования</span>
    <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">const</span> MyClass<span class="token operator">&amp;</span> other<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3. Оператор копирующего присваивания</span>
    MyClass<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> MyClass<span class="token operator">&amp;</span> other<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4. Конструктор перемещения</span>
    <span class="token function">MyClass</span><span class="token punctuation">(</span>MyClass<span class="token operator">&amp;&amp;</span> other<span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span>

    <span class="token comment">// 5. Оператор перемещающего присваивания</span>
    MyClass<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>MyClass<span class="token operator">&amp;&amp;</span> other<span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span>

    <span class="token comment">// 6. Деструктор</span>
    <span class="token operator">~</span><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p><em>Несмотря на название, методов шесть, но правило называется Rule of Five, так как конструктор по умолчанию не всегда обязателен.</em></p>
</blockquote>
<p><em><strong>Кратко о каждом методе</strong></em></p>
<ul>
<li><em><strong>Конструктор копирования</strong></em></li>
</ul>
<p>Создаёт поразрядную копию объекта.</p>
<pre class=" language-cpp"><code class="prism  language-cpp"><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">const</span> MyClass<span class="token operator">&amp;</span> other<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Используется при:</p>
<pre class=" language-cpp"><code class="prism  language-cpp">MyClass <span class="token class-name">a</span><span class="token punctuation">;</span>
MyClass <span class="token class-name">b</span> <span class="token operator">=</span> a<span class="token punctuation">;</span>
</code></pre>
<ul>
<li><em><strong>Оператор копирующего присваивания</strong></em></li>
</ul>
<p>Заменяет содержимое уже существующего объекта.</p>
<pre class=" language-cpp"><code class="prism  language-cpp">MyClass<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> MyClass<span class="token operator">&amp;</span> other<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Используется при:</p>
<pre class=" language-cpp"><code class="prism  language-cpp">b <span class="token operator">=</span> a<span class="token punctuation">;</span>
</code></pre>
<ul>
<li><em><strong>Конструктор перемещения (C++11+)</strong></em></li>
</ul>
<p>«Забирает» ресурсы у временного объекта.</p>
<pre class=" language-cpp"><code class="prism  language-cpp"><span class="token function">MyClass</span><span class="token punctuation">(</span>MyClass<span class="token operator">&amp;&amp;</span> other<span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li><em><strong>Оператор перемещающего присваивания</strong></em></li>
</ul>
<p>Передаёт ресурсы существующему объекту.</p>
<pre class=" language-cpp"><code class="prism  language-cpp">MyClass<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>MyClass<span class="token operator">&amp;&amp;</span> other<span class="token punctuation">)</span> <span class="token keyword">noexcept</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li><em><strong>Деструктор</strong></em></li>
</ul>
<p>Освобождает ресурсы.</p>
<pre class=" language-cpp"><code class="prism  language-cpp"><span class="token operator">~</span><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><em><strong>Rule of Three, Rule of Five и Rule of Zero</strong></em></p>

<table>
<thead>
<tr>
<th>Правило</th>
<th>Когда применяется</th>
<th>Необходимые методы</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rule of Three</td>
<td>Класс владеет ресурсами (до C++11)</td>
<td>Деструктор, конструктор копирования, оператор копирующего присваивания</td>
</tr>
<tr>
<td>Rule of Five</td>
<td>Класс владеет ресурсами (C++11+)</td>
<td>Rule of Three + конструктор перемещения и оператор перемещающего присваивания</td>
</tr>
<tr>
<td>Rule of Zero</td>
<td>Класс не управляет ресурсами напрямую</td>
<td>Специальные методы не реализуются вручную</td>
</tr>
</tbody>
</table><p><em><strong>Когда Rule of Five НЕ нужен</strong></em></p>
<p>Rule of Five не требуется, если:</p>
<ul>
<li>класс не владеет ресурсами;</li>
<li>используются std::vector, std::unique_ptr, std::string (Rule of Zero).</li>
</ul>
<hr>
</div>
</body>

</html>
